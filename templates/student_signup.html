<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Character encoding for proper text rendering -->
    <meta charset="UTF-8" />

    <!-- Page title shown in browser tab -->
    <title>Student SignUp</title>

    <!-- Responsive viewport for mobile and desktop -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS for layout and UI components -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Bootstrap Icons for password visibility toggle -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      /* Full-screen centered layout with neutral gradient background */
      body {
        min-height: 100vh;
        background: linear-gradient(135deg, #f1f3f5, #e9ecef);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Blink animation for password visibility toggle */
      @keyframes blink {
        0% {
          transform: scaleY(1);
        }
        40% {
          transform: scaleY(0.1);
        }
        60% {
          transform: scaleY(0.1);
        }
        100% {
          transform: scaleY(1);
        }
      }

      /* Applied to eye icon during toggle interaction */
      .eye-blink {
        animation: blink 0.3s ease-in-out;
        transform-origin: center;
      }

      /* Authentication card styling */
      .auth-card {
        max-width: 480px;
        width: 100%;
        border-radius: 16px;
        padding: 40px;
        background: #ffffff;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
      }

      /* Card heading emphasis */
      .auth-card h3 {
        font-weight: 700;
      }

      /* Input field styling */
      .form-control {
        border-radius: 10px;
        padding: 12px;
      }

      /* Primary action button styling */
      .btn-main {
        border-radius: 10px;
        padding: 10px 32px;
        font-weight: 600;
      }

      /* Bottom-right positioning for flash messages */
      .alert-bottom-right {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1050;
        min-width: 300px;
      }
    </style>
  </head>

  <body>
    <!-- ================= FLASH MESSAGES ================= -->
    <!-- Displays server-side feedback messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div
      class="alert alert-{{ category }} alert-dismissible fade show alert-bottom-right"
      role="alert"
    >
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <!-- ================= SIGN-UP CARD ================= -->
    <div class="auth-card text-center">
      <!-- Page heading -->
      <h3 class="mb-3">Create Account</h3>

      <!-- Supporting subtext -->
      <p class="text-muted mb-4">Join us in just a few seconds</p>

      <!-- Student registration form -->
      <form action="student-signup" method="POST">
        <!-- Username input -->
        <div class="mb-3 text-start">
          <label class="form-label fw-semibold">Username</label>
          <input
            type="text"
            class="form-control"
            name="username"
            placeholder="Enter username"
            required
          />
        </div>

        <!-- Password input with visibility toggle -->
        <div class="mb-2 text-start">
          <label class="form-label fw-semibold">Password</label>
          <div class="input-group">
            <input
              type="password"
              class="form-control"
              id="password"
              name="password"
              placeholder="Enter password"
              required
            />

            <!-- Button to toggle password visibility -->
            <button
              class="btn btn-outline-secondary"
              type="button"
              onclick="togglePassword()"
            >
              <i class="bi bi-eye" id="eyeIcon"></i>
            </button>
          </div>
        </div>

        <br />

        <!-- Form submission button -->
        <button type="submit" class="btn btn-dark btn-main w-100">
          Sign Up
        </button>
      </form>

      <!-- Redirect link for existing users -->
      <div class="mt-4">
        <span class="text-muted">Already have an account?</span>
        <a
          href="{{ url_for('student_signin') }}"
          class="fw-semibold text-decoration-none"
        >
          Sign In
        </a>
      </div>
    </div>

    <!-- Bootstrap JavaScript bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Password visibility toggle logic -->
    <script>
      function togglePassword() {
        const passwordInput = document.getElementById("password");
        const eyeIcon = document.getElementById("eyeIcon");

        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          eyeIcon.classList.replace("bi-eye", "bi-eye-slash");
        } else {
          passwordInput.type = "password";
          eyeIcon.classList.replace("bi-eye-slash", "bi-eye");
        }

        // Restart blink animation on toggle
        eyeIcon.classList.remove("eye-blink");
        void eyeIcon.offsetWidth;
        eyeIcon.classList.add("eye-blink");
      }

      /* Auto-dismiss flash alerts after 3 seconds */
      setTimeout(() => {
        document.querySelectorAll(".alert").forEach((alert) => {
          const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
          bsAlert.close();
        });
      }, 3000);
    </script>
  </body>
</html>
